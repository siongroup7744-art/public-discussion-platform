<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <title>Обществено Обсъждане</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; margin: 0; padding: 0; }
    header { background: #007acc; color: white; padding: 1em 2em; text-align: center; }
    nav { background: #eee; padding: 1em; display: flex; justify-content: space-around; flex-wrap: wrap; }
    nav button { background: #007acc; color: white; border: none; padding: 10px; margin: 5px; border-radius: 5px; cursor: pointer; }
    nav button:hover { background: #005f99; }
    .content { padding: 2em; }
    .category { background: white; margin-bottom: 1em; padding: 1em; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .subcategory { margin-left: 1em; padding: 0.5em; background: #f9f9f9; border-left: 3px solid #007acc; margin-top: 10px; }
    .vote-buttons button { margin-right: 10px; padding: 5px 15px; border: none; border-radius: 5px; }
    .yes { background: #28a745; color: white; }
    .no { background: #dc3545; color: white; }
    textarea { width: 100%; height: 80px; margin-top: 10px; padding: 10px; border-radius: 5px; border: 1px solid #ccc; }
    .lang-switch { float: right; margin-top: -40px; margin-right: 20px; }
  </style>
</head>
<body>

<header>
  <h1>Платформа за Обществено Обсъждане</h1>
  <div class="lang-switch">
    <select id="languageSelect" onchange="changeLanguage()">
      <option value="bg">Български</option>
      <option value="en">English</option>
      <option value="de">Deutsch</option>
      <option value="fr">Français</option>
    </select>
  </div>
</header>

<nav>
  <button onclick="filterCategory('transport')">Транспорт</button>
  <button onclick="filterCategory('education')">Образование</button>
  <button onclick="filterCategory('health')">Здравеопазване</button>
  <button onclick="filterCategory('environment')">Околна среда</button>
</nav>

<div class="content" id="discussionArea">

  <div class="category" data-category="transport">
    <h2>Транспорт</h2>
    <div class="subcategory">
      <h3>Разширяване на метрото</h3>
      <p>Съгласни ли сте с предложението за разширяване на линията на метрото?</p>
      <div class="vote-buttons">
        <button class="yes" onclick="vote('yes')">ДА</button>
        <button class="no" onclick="vote('no')">НЕ</button>
      </div>
      <textarea placeholder="Вашето мнение..."></textarea>
    </div>
  </div>

  <div class="category" data-category="education">
    <h2>Образование</h2>
    <div class="subcategory">
      <h3>Въвеждане на дигитални учебници</h3>
      <p>Подкрепяте ли използването на дигитални учебници вместо хартиени?</p>
      <div class="vote-buttons">
        <button class="yes" onclick="vote('yes')">ДА</button>
        <button class="no" onclick="vote('no')">НЕ</button>
      </div>
      <textarea placeholder="Вашето мнение..."></textarea>
    </div>
  </div>

</div>

<!-- Google Translate -->
<div id="google_translate_element" style="display: none;"></div>

<script type="text/javascript">
  function vote(answer) {
    alert("Вашият глас \"" + (answer === 'yes' ? "ДА" : "НЕ") + "\" беше отчетен. Благодарим!");
  }

  function filterCategory(category) {
    const allCategories = document.querySelectorAll('.category');
    allCategories.forEach(cat => {
      cat.style.display = (cat.dataset.category === category) ? 'block' : 'none';
    });
  }

  function changeLanguage() {
    const selectedLang = document.getElementById("languageSelect").value;
    const langMap = {
      bg: 'bg',
      en: 'en',
      de: 'de',
      fr: 'fr'
    };
    const targetLang = langMap[selectedLang];
    const gtFrame = document.querySelector('iframe.goog-te-banner-frame');
    if (gtFrame) gtFrame.remove(); // Remove banner if exists
    const googleTranslateElement = document.createElement("script");
    googleTranslateElement.type = "text/javascript";
    googleTranslateElement.src =
      "//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit";
    document.body.appendChild(googleTranslateElement);

    window.googleTranslateElementInit = function () {
      new google.translate.TranslateElement({
        pageLanguage: 'bg',
        includedLanguages: 'bg,en,de,fr',
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE
      }, 'google_translate_element');
    };

    setTimeout(() => {
      const select = document.querySelector(".goog-te-combo");
      if (select) {
        select.value = targetLang;
        select.dispatchEvent(new Event('change'));
      }
    }, 1000);
  }
</script>

</body>
</html>
